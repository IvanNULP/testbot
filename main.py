import os
import random
from aiohttp import web
from telegram import Update, Message
from telegram.ext import (
    ApplicationBuilder,
    MessageHandler,
    CommandHandler,
    ContextTypes,
    filters,
)
from openai import OpenAI

BOT_TOKEN = os.getenv("BOT_TOKEN")
AUTHORIZED_USER_ID = 384210176
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")

client = OpenAI(api_key=OPENAI_API_KEY)

MODES = {    
    "polit_anal": "–î–∏–≤–∞–Ω–Ω–∏–π –ø–æ–ª—ñ—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫, –≤—Å—ñ –π–æ–º—É –≤—Å–µ –≤–∏–Ω–Ω—ñ, –Ω–∞—Ä–∞—Ç–∏–≤–∏ —Ä–æ—Å—ñ–π—Å—å–∫–æ–≥–æ —Ç–µ–ª–µ–±–∞—á–µ–Ω–Ω—è.",
    "superexpert": "–†–∞–Ω–¥–æ–º–Ω–∏–π –µ–∫—Å–ø–µ—Ä—Ç –∑ –ø–æ–ª—ñ—Ç–∏—á–Ω–∏—Ö, –∫—É–ª—å—Ç—É—Ä–Ω–∏—Ö, —Å–ø–æ—Ä—Ç–∏–≤–Ω–∏—Ö, –∫–æ—Å–º—ñ—á–Ω–∏—Ö —ñ —ñ–Ω—à–∏—Ö —Å—Ñ–µ—Ä - —Å—É–ø–µ—Ä-—Ç—Ä–æ–ª—å.",
    "zrada": "–ó—Ä–∞–¥–æ-–ø–∞—Ç—Ä—ñ–æ—Ç —ñ–∑ —á–æ—Ä–Ω–∏–º –≥—É–º–æ—Ä–æ–º.",    
    "zel_bot": "–ë–æ—Ç –ó–µ–ª–µ–Ω—Å—å–∫–æ–≥–æ, –Ω–µ–Ω–∞–≤–∏–¥–∏—Ç—å –ü–æ—Ä–æ—à–µ–Ω–∫–∞, –æ–±–æ–∂–Ω—î —Å–ª—É–≥—É –Ω–∞—Ä–æ–¥—É, —É –≤—Å—å–æ–º—É –≤–∏–Ω–Ω—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω–∏–∫–∏.",
    "balashov": "–°–≤—ñ–¥–æ–∫ –ë–∞–ª–∞—à–æ–≤–∞, –ø–∞—Ä—Ç—ñ—è '5.10', –ø–æ–ø—É–ª—ñ–∑–º –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏",
    "vorchun": "–í–æ—Ä—á—É–Ω-–±—É—Ä—á—É–Ω.",
    "poder": "–õ–µ—Å—å –ü–æ–¥–µ—Ä–≤ º—è–Ω—Å—å–∫–∏–π-—Å—Ç–∞–π–ª: –ø–∞—Ñ–æ—Å, –º–∞—Ç—é–∫–∏, —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞ —Å–∞—Ç–∏—Ä–∞, –≥—Ä–æ—Ç–µ—Å–∫ —ñ —Ç–µ–∞—Ç—Ä, –≤—ñ–¥–æ–º—ñ –≤–∏—Å–ª–æ–≤–∏ –õ–µ—Å—è –ü–æ–¥–µ—Ä–≤ º—è–Ω—Å—å–∫–æ–≥–æ –∑ –º–∞—Ç—é–∫–∞–º–∏ –∑ –π–æ–≥–æ —Ç–≤–æ—Ä—ñ–≤.",
    "visionary": "–Ø—Å–Ω–æ–≤–∏–¥–µ—Ü—å –∑ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª—É ‚Äî –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –∑ –º—ñ—Å—Ç–∏—á–Ω–∏–º, –∫—É–º–µ–¥–Ω–∏–º —ñ –∞–±—Å—É—Ä–¥–Ω–∏–º –ø—ñ–¥—Ç–µ–∫—Å—Ç–æ–º.",
    "kum": "–ö—É–º –∑ —Å–µ–ª–∞, —Ä–æ–∑–∫–∞–∑—É—î –≤—Å–µ –ø–æ-—Å–≤–æ—î–º—É, –∑ —Ñ–æ–ª—å–∫–ª–æ—Ä–Ω–∏–º –≥—É–º–æ—Ä–æ–º —ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –Ω–∞—Ä–æ–¥–Ω–∏–π –∂–∞—Ä–≥–æ–Ω."
}

EMOJIS = {    
    "polit_anal": "üìä",
    "superexpert": "üß†",
    "zrada": "üá∫üá¶",    
    "zel_bot": "ü§ñ",
    "balashov": "üí∏",
    "vorchun": "üßì",
    "poder": "üé≠",
    "visionary": "üîÆ",
    "kum": "üßÖ"
}

# —ñ–Ω—à–∏–π –∫–æ–¥ —ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ª–∏—à–∞—î–º–æ –±–µ–∑ –∑–º—ñ–Ω